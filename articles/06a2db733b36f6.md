---
title: "Remixã®loaderã§Dateå‹ãŒstringã«ãªã‚‹ã®ã‚’é˜²ã"
emoji: "ğŸ˜†"
type: "tech"
topics:
  - "react"
  - "typescript"
  - "remix"
published: true
published_at: "2023-02-25 21:10"
---

# ã¯ã˜ã‚ã«

ä»Šå›ç´¹ä»‹ã™ã‚‹æ–¹æ³•ã¯Remixæ¨™æº–ã§ä¿®æ­£ã™ã‚‹ã®ã§ã¯ãªãã€`remix-typedjson`ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã‚’å–ã£ã¦ã„ã¾ã™ã€‚

ã¾ãŸã€ç§ã®ä½¿ç”¨ã—ã¦ã„ã‚‹ç’°å¢ƒã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
```json
{
    "@remix-run/node": "^1.13.0",
    "@remix-run/react": "^1.13.0",
    "@remix-run/serve": "^1.13.0",
    "remix-typedjson": "^0.1.7"
}
```

ãã‚Œã§ã¯ã€ã•ã£ããè¦‹ã¦ã„ãã¾ã—ã‚‡ã†

## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pnpm add remix-typedjson
```

## `loader`ã®ä¿®æ­£

Remixã¯å¹¾ã¤ã‹ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’çµŒã¦ã€loaderã‹ã‚‰ã®å‹æ¨è«–ãŒé€²åŒ–ã—ã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€`remix-typedjson`ã«ã‚‚æ›¸ã„ã¦ã‚ã‚‹ä»¥ä¸‹ã®ã‚ˆã†ã«âœ…ãŒã¤ã„ã¦ã„ã‚‹æ›¸ãæ–¹ã§ã¯ãªã„ã¨æ­£ã—ãå‹•ä½œã—ã¾ã›ã‚“ã€‚

```typescript
âŒ export const loader: LoaderFunction = async ({request}) => {}
âœ… export const loader = async ({request}: LoaderArgs) => {}
âœ… export async function loader({request}: LoaderArgs) {}
```

æˆ»ã‚Šå€¤ã‚’è¿”ã™éš›ã¯`@remix-run/node`ã®`json`ã§ã¯ãªãã€`remix-typedjson`ã®`typedjson`ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```typescript
import { typedjson } from "remix-typedjson";


return typedjson(
  { greeting: 'hello', today: new Date() },
  // ResponseInit is optional, just like the `json` helper
  { headers: { 'set-header': await commitSession(session) } },
)
```

## `useLoaderData`ã®ä¿®æ­£

ä»¥ä¸‹ã®ã‚ˆã†ã« `@remix-run/react`ã®`useLoaderData`ã§ã¯ãªãã€`remix-typedjson` ã® `useTypedLoaderData` ã¨ã„ã†ã‚‚ã®ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```typescript
import { useTypedLoaderData } from "remix-typedjson";

const loaderData = useTypedLoaderData<typeof loader>()
```

## ä»–ã«ã‚‚ãŸãã•ã‚“

å…¨éƒ¨ç´¹ä»‹ã™ã‚‹ã¨é•·ããªã£ã¦ã—ã¾ã†ã®ã§ã€ã“ã“ã‹ã‚‰ã¯Remixæ¨™æº–ã®ã‚‚ã®ã‚’ `remix-typedjson`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ç½®ãæ›ãˆã‚‹å ´åˆã®å¤‰æ›è¡¨ã¨ã—ã¦ã”ç´¹ä»‹ã—ã¾ã™ã€‚

|Remix|remix-typedjson|
|---|---|
|useActionData|useTypedActionData|
|useRouteLoaderData|useTypedRouteLoaderData|
|useFetcher|useTypedFetcher|
|redirect|redirect|
|MetaFunction|TypedMetaFunction|

ã‚‚ã£ã¨è©³ã—ãçŸ¥ã‚ŠãŸã„ã¨ã„ã†æ–¹ã¯ä»¥ä¸‹ãŒãƒªãƒã‚¸ãƒˆãƒªã«ãªã‚‹ã®ã§æ˜¯éè¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼

https://github.com/kiliman/remix-typedjson


## å†…åŒ…ã•ã‚Œãªã„ã®?

ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ©Ÿèƒ½ã¯æ™®é€šã«ä¾¿åˆ©ãªã®ã§Remixã«å†…åŒ…ã•ã‚Œã¦æ¬²ã—ã„ã§ã™ãŒã€ç¾çŠ¶ã¯ãªã„ã‚ˆã†ã«æ„Ÿã˜ã¾ã™ã€‚ç†ç”±ã¯ä»¥ä¸‹ã®Issueã®ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚¿ãƒ¼ã®æ–¹ã®ç™ºè¨€ã§ã™ã€‚

https://github.com/remix-run/remix/issues/4529#issuecomment-1308861268

ä»–ã«ã‚‚Remixã§ `remix-typedjson` ãŒä½¿ç”¨ã—ã¦ã„ã‚‹ `superjson` ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å†…åŒ…ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã¨ã„ã†è­°è«–ãŒã‚ã‚Šã¾ã™ãŒä»Šã®ã¨ã“ã‚é€²æ—ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

https://github.com/remix-run/remix/discussions/1910#discussion-3871659

ã¾ãŸã€è­°è«–ã®ä½œè€…ã§ã‚ã‚‹sergiodxaã•ã‚“ãŒä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è­°è«–ã®æœ€åˆã«è¿½è¨˜ã—ã¦ã„ã¾ã™ã€‚

> Note: I no longer think this is something that should be added, also @kiliman remix-typedjson is a great and simple to use tool.

## æœ€å¾Œã«

prismaãªã©ã‚’`loader`å†…ã§ä½¿ç”¨ã—ã¦ã„ã‚‹éš›ã«`Date`å‹ãŒã‚ã‚‹ã¨`String`å‹ã«ãªã£ã¦ã—ã¾ã„ã€ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ä¸Šã®ã‚¨ãƒ©ãƒ¼ãŒã‚ˆãå‡ºã¦ã„ã¦ã†ãƒ¼ã‚“ã¨æ€ã£ã¦ã„ãŸã®ã§ã€ãã†ã„ã†æ–¹ã®ãŠå½¹ã«ç«‹ã¦ã°å¹¸ã„ã§ã™